{% extends "template.html" %}
{% load i18n %}
{% load filters %}
{% block title %} - Add new pattern{% endblock %}

{% block css %} 
<link rel="stylesheet" href="{{ STATIC_URL }}css/add.css" type="text/css">
<style type="text/css">

</style>
<script src="{{ STATIC_URL }}js/add-pattern.js" type="text/javascript" ></script>
<script language="Javascript" type="text/javascript">
var colors = {{ colors|safe }};
var nofstrings = 0;
var limit = 30;
</script>
{% endblock %}


{% block content %}
	{% if user.is_authenticated %}
		<form action="addpattern" method="post" id="addbracelet">
		{% csrf_token %}
		<table>
		<tr>
			<td>{% trans "Name" %}: </td>
			<td><input type="text" name="name" class="tableinput"></td>
		</tr>
		<tr>
			<td>{% trans "Difficulty" %}: </td>
			<td><select name="difficulty" class="tableinput">
			<option value="1" {% if difficulty == "1" %}selected="selected" {% endif %}>{% trans "Easy" %}</option>
			<option value="2" {% if difficulty == "2" %}selected="selected" {% endif %}>{% trans "Medium" %}</option>
			<option value="3" {% if difficulty == "3" %}selected="selected" {% endif %}>{% trans "Hard" %}</option>
			</select>
			</td>
		</tr>
		<tr>
			<td>{% trans "Category" %}:</td>
			<td><select name="category" class="tableinput">
				{% if categories %}
					{% for c in categories %}
						<option {% if category == c.name %}selected="selected" {% endif %}>{{ c.name }}</option>
					{% endfor %}
					</select>
				{% endif %}
				</select>
			</td>
		</tr>
	</table>
	{% else %}
		{% trans "You are not logged in, which means you won't be able to save your work!" %}
		</div>
		<div class='spacer'></div>
		<div class='box'>
	{% endif %}

	{% trans "Set color of strings (use buttons below to add and remove strings)" %}: <br />
	<span id="colorsInput"></span>
    <input type="button" value='{% trans "Add string" %}' onClick="addKnotColumnButton('colorsInput');">
    <input type="button" value='{% trans "Remove string" %}' onClick="removeInput();"><br />
    
    <div id="pattern-thumb"></div>
    <div id="pattern-container">
    	<div id="pattern-canvas"></div>
    	<div id="pattern-designer"></div>
    </div>
    <input type="button" value='{% trans "Add row" %}' onClick="addRow();">
    <input type="button" value='{% trans "Remove row" %}' onClick="removeRow();"><br />
	<textarea id="pattern-string" rows="20" cols="100" hidden="hidden" name="pattern"></textarea>
{% if user.is_authenticated %}
	<input type="submit" value='{% trans "Add pattern" %}'>
</form>
{% endif %}
{% endblock %}
