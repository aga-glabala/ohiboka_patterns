{% extends "template.html" %}
{% load i18n %}
{% load comments %}
{% block css %}
<script src="{{ STATIC_URL }}js/jquery-ui-1.8.18.custom.min.js" type="text/javascript" ></script>
<script src="{{ STATIC_URL }}js/jquery.lightbox-0.5.pack.js" type="text/javascript" ></script>
<script src="{{ STATIC_URL }}js/bracelet.js" type="text/javascript" ></script>
<link rel="stylesheet" href="{{ STATIC_URL }}css/bracelet.css" type="text/css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.lightbox-0.5.css" type="text/css">
<style type="text/css">
{{ style }}
</style>
<script>
	{% if selectTabs %}
		$(function() {
			$( "#tabs" ).tabs("select", {{ selectTabs }});
		});
	{% endif %}
	var errorText = '{% trans "Could not load this tab. Try reload page if problem will still exist - let me know." %}'
	var knotsColor = {{ knotsColor }};
	var knotsType = {{ knotsType }};
	var texts = {{ texts|safe }};
	var lastKnotRow = 0;
	var lastKnotCol = 0;
	var sequence = 0;
	var rate = 0;
	var nofstr = {{nofstr}};
	var nofrows = {{nofrows}};
	var bracelet_id = {{ bracelet_id }};
	var strings = {{ strings }};
	var ifwhite = {{ ifwhite|safe }};
	var STATIC_URL = {{ STATIC_URL }};
	{% if rate %}
		rate = {{ rate }};
	{% endif %}
</script>
{% endblock %}

{% block content %}
{% get_comment_count for bracelet.bracelet bracelet_id as comment_count %}
<div id="tabs">
	<h2>{{ name }}</h2>
	<ul>
		<li><a href="#tabs-1">{% trans "Pattern" %}</a></li>
		<li><a href="#tabs-2">{% trans "Step by step instructions" %}</a></li>
		<li><a href="/comments/{{bracelet_id}}">{% trans "Comments" %} ({{ comment_count }})</a></li>
		<li><a href="/bracelet/photos/{{bracelet_id}}">{% trans "Photos" %} ({{ nofphotos }})</a></li>
	</ul>
	<div id="ratepattern">
		{% if user.is_authenticated %}
			{% trans "rate pattern" %}: 
			<i class="icon-star" id="rate1">&nbsp;</i>
			<i class="icon-star" id="rate2">&nbsp;</i>
			<i class="icon-star" id="rate3">&nbsp;</i>
			<i class="icon-star" id="rate4">&nbsp;</i>
			<i class="icon-star" id="rate5">&nbsp;</i>
		{% else %}
			{% trans "you need to be logged to rate pattern" %}
		{% endif %}
	</div>
	<div id="tabs-1">
		<div class="fb-like" data-href="{{response.url}}" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false"></div>
		<div id="pattern-thumb">
		</div>
		<div class="pattern-box">
			<div id="pattern-canvas">
			</div>
			<div id="pattern">
			</div>
		</div>
	</div>
	<div id="tabs-2">
		<div class="pattern-box">
			<div id="step-pattern-canvas">
			</div>
			<div id="step-pattern">
			</div>
		</div>
		<div id="instructionbox">
			<div id="buttons">
				<button onclick="del5Knots()"><i class="icon-prev">&nbsp;</i> {% trans "Back 5" %}</button>
				<button onclick="delKnot()"><i class="icon-prev">&nbsp;</i> {% trans "Back" %}</button>
				<button onclick="addKnot()">{% trans "Next" %} <i class="icon-next">&nbsp;</i></button>
				<button onclick="add5Knots()">{% trans "Next 5" %} <i class="icon-next">&nbsp;</i></button>
				
			</div>
			<div id="instructions"></div>
		</div>
		<div style="clear:both"></div>
	</div>
	
	
	
</div>


{% endblock %}
